## 更新履歴

### 1.2.6 - 2025-08-31
- 🎯 **メタボックス機能の完全実装**
  - 投稿編集画面にサイト別設定メタボックスを追加
  - サイトごとの投稿ステータス（公開/下書き/予約投稿）設定機能
  - サブサイトのカテゴリー・タグ選択機能
  - 予約投稿の個別日時設定機能
- 🛡️ **サブサイト投稿制御の強化**
  - 「サブサイトで勝手に公開になる」問題を完全解決
  - WP_Cross_Post_Metabox_Manager クラスによる統合管理
  - メタボックス設定の永続化とセキュリティ強化（nonce検証）
- 🔧 **カスタムテーブル管理の改善**
  - wp_cross_post_site_taxonomies テーブルの強制作成機能
  - プラグイン初期化時の自動テーブル存在確認
  - サブサイト分類データの完全独立管理
- ⚡ **投稿データ処理の最適化**
  - prepare_post_data_for_site メソッドの新規追加
  - サイト別設定を考慮した投稿データ準備
  - 同期ハンドラーでのメタボックス設定自動適用
- 🎨 **ユーザーエクスペリエンス向上**
  - 投稿編集画面での直感的なサイト別設定
  - 管理画面用JavaScript/CSSの自動読み込み
  - AJAX通信による動的なカテゴリー・タグ表示

### 1.2.5 - 2025-01-20
- 🐛 **データ整合性の緊急修正**
  - 統計情報とサイトリスト表示の不整合を解決
  - admin/settings.phpで新しいSite_Handler_V2を使用するように修正
  - 古いwp_optionsデータとの統合表示を実装
- 🔐 **認証エラーの完全解決**
  - Sync_Engineでapp_password取得エラーを修正
  - 同期処理でget_site_data($site_id, true)を使用して認証情報を含むデータを取得
  - 並列・シリアル両方の同期処理で認証データ取得を修正
  - 「Undefined array key "app_password"」警告を解消
- 🚀 **投稿同期の安定化**
  - 401認証エラー「このユーザーとして投稿を編集する権限がありません」を解決
  - Auth_Managerで適切なapp_passwordアクセスを確保
  - Site_Handler_V2の認証データ取得機能を最適化

### 1.2.4 - 2025-01-20
- 🐛 **設定画面の緊急修正**
  - admin/settings.phpで古いSite_Handler参照を修正
  - ArgumentCountErrorの解消
  - グローバルインスタンスを使用するように変更
- 🚀 **メンテナンス機能の追加**
  - 強制キャッシュクリア機能を管理画面に追加
  - ゴーストサイト自動削除機能を追加
  - 統計情報表示（登録サイト数、有効サイト数、DB バージョン）
  - 視覚的で分かりやすいUI設計
- 🎨 **管理画面の改善**
  - メンテナンス専用セクションの追加
  - ユーザーフレンドリーな警告メッセージ
  - 危険な操作には確認ダイアログを実装

### 1.2.3 - 2025-01-20
- 🐛 **Error_Manager緊急修正**
  - Site_Handler_V2で未定義のhandle_error()メソッド呼び出しを修正
  - handle_general_error()メソッドを使用するように変更
  - サイト追加・削除・取得時のエラーハンドリングを修正
- 🚀 **キャッシュ管理強化**
  - プラグイン有効化時に全キャッシュをクリアする機能を追加
  - 古いデータの再読み込みを防止
  - WordPressオブジェクトキャッシュとトランジェントキャッシュの両方をクリア

### 1.2.2 - 2025-01-20
- 🐛 **データベース関連の緊急修正**
  - dbDelta関数で外部キー制約が処理できない問題を修正
  - 外部キー制約を別途追加する方式に変更
  - プラグイン有効化時の予期しない出力を抑制
  - 出力バッファリングによる安全な有効化処理
  - デバッグモードでのみエラーログ出力するよう改善

### 1.2.1 - 2025-01-20
- 🐛 **緊急バグ修正**
  - Image_Managerクラスの未実装メソッド修正
  - インターフェースのset_retry_wait_timeメソッドを実装
  - PHP Fatal Errorの解消

### 1.2.0 - 2025-01-20
- 🚀 データベース構造の大幅改善
  - 独自テーブルの実装によるパフォーマンス向上（10-50倍高速化）
  - カスタムテーブル4つの新規作成（sites、taxonomy_mapping、media_sync、sync_history）
  - 外部キー制約による完全なデータ整合性保証
- 📊 ER図による設計の可視化
  - project.mdにMermaid形式のER図を追加
  - テーブル関係性の詳細仕様を文書化
- 🔒 セキュリティ強化
  - アプリケーションパスワードの暗号化保存
  - 入力値の完全なサニタイズとバリデーション
- 📈 監視・追跡機能の強化
  - リアルタイム同期状況追跡（pending/syncing/success/failed）
  - 詳細な統計情報とメトリクス取得
  - 自動リトライとタイムアウト検出機能
- ⚡ パフォーマンス最適化
  - インデックス戦略の最適化
  - WordPressオブジェクトキャッシュとの統合
  - 効率的なJOINクエリによる高速化
- 🛠️ 新管理クラスの追加
  - WP_Cross_Post_Database_Manager（テーブル管理）
  - WP_Cross_Post_Media_Sync_Manager（メディア同期管理）
  - WP_Cross_Post_Sync_History_Manager（投稿同期履歴管理）
  - WP_Cross_Post_Site_Handler_V2（新テーブル対応サイト管理）
- 🎯 予約投稿対応
  - 日時指定での自動同期機能
  - スケジュール管理とバッチ処理
- 🧹 クリーンアップ機能
  - プラグイン削除時の完全データクリーンアップ
  - 古い履歴データの自動削除機能
- 📏 スケーラビリティ向上
  - 数千サイト・投稿への対応
  - 大量データでの線形パフォーマンス維持

### 1.1.0 - 2025-08-27
- 🔄 WordPress 6.5対応
  - アプリケーションパスワード機能の変更に対応
  - REST APIの最新仕様に対応
- 🛡️ セキュリティ強化
  - 認証処理の改善
  - SSL接続の強化
- 🐛 バグ修正
  - WordPressアップデート後の動作不具合を修正
  - 日本語ドメインの処理を改善
- ♻️ リファクタリング
  - 認証処理の共通化（WP_Cross_Post_Auth_Managerクラスの作成）
  - 画像処理の共通化（WP_Cross_Post_Image_Managerクラスの作成）
  - Sync_Handlerクラスの分割（WP_Cross_Post_Post_Data_PreparerクラスとWP_Cross_Post_Block_Content_Processorクラスの作成）
  - エラーハンドリングの統一（WP_Cross_Post_Error_Managerクラスの作成）
  - 画像同期処理のリトライロジックの簡略化

### 1.0.9 - 2024-02-XX
- 🖼️ アイキャッチ画像の同期処理を改善
  - 画像ファイルの取得方法を強化
  - 画像アップロード処理のエラーハンドリングを改善
- 🏷️ カテゴリーとタグの同期処理を強化
  - カテゴリー情報の完全な転送を実装
  - タクソノミー階層構造を保持
- 📝 投稿ステータスの反映を改善
  - 公開設定（公開、下書き、非公開）の正確な反映
  - 予約投稿日時の適切な設定
- 🔄 メタデータの同期機能を強化
  - コメント設定、投稿フォーマットなどの完全な同期

### 1.0.8 - 2024-01-XX
- ✨ カテゴリーとタグの同期機能を強化
  - REST API v2に準拠したタクソノミー同期の実装
  - 親カテゴリーの関係性を保持
  - エラーハンドリングの改善
- 💄 管理画面のUIを改善
  - マテリアルデザインの適用
  - 同期状態の表示を強化
  - エラーメッセージの詳細化
- 🐛 バグ修正
  - タクソノミー同期時のエラー処理を改善
  - 日本語ドメインの正規化処理を追加
  - 同期処理のパフォーマンスを改善

### 1.0.7 - 2024-01-XX
- ✨ カテゴリー・タグの自動同期機能を追加
- 🎨 管理画面のUIを改善（マテリアルデザイン）
- 🐛 日本語ドメインの処理を修正
- ♻️ REST API v2への完全対応
- 🔧 同期状態の表示を改善

### 1.0.6 - 2024-01-XX
- ✨ スラッグの同期機能を追加
- 🔒 セキュリティ強化
- 🐛 レート制限への対応を改善

### 1.0.5 - 2024-01-XX
- ✨ SWELLテーマのFAQブロック対応
- 🎨 ブロックコンテンツの同期を改善